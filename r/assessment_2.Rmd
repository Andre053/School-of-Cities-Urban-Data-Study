---
title: "module_2_discussion"
author: "Andr√© de Biasi"
date: "2026-01-23"
output: html_document
---

# Module 2 Discussion

## Requirements
- Create at least 2 charts that reveal meaningful patterns in the data
- Select appropriate chart types
- Apply visual variables, hierarchy, and accessibility principles
- Communicate what the charts show and why you chose those specific chart types
- Demonstrate some initial thought about the final project

## Data exploration
Load libraries
```{r}
library(tidyr)
library(janitor)
library(ggplot2)
library(forcats)
library(dplyr)

library(opendatatoronto)
```
### Prep the data
Load in data (https://open.toronto.ca/dataset/subsidized-housing-listings/)
```{r}
# get package
package <- show_package("153ea449-b7f4-4c4d-889a-ec0f89b3bbc9")
	
# get all resources for this package
resources <- list_package_resources("153ea449-b7f4-4c4d-889a-ec0f89b3bbc9")
	
# identify datastore resources; by default, Toronto Open Data sets datastore resource format to CSV for non-geospatial and GeoJSON for geospatial resources
datastore_resources <- filter(resources, tolower(format) %in% c('csv', 'geojson'))
	
# load the first datastore resource as a sample
df_buildings <- filter(datastore_resources, row_number()==1) |> get_resource() |> clean_names()
df_units <- filter(datastore_resources, row_number()==2) |> get_resource() |> clean_names()
```

Format the dfs
```{r}
df_units$household_income_limit <- as.numeric(df_units$household_income_limit)
df_units$units_available_in_the_last_12_months <- as.numeric(df_units$units_available_in_the_last_12_months)
df_units$number_of_market_rent_units <- as.numeric(df_units$number_of_market_rent_units)
df_units$number_of_subsidized_units <- as.numeric(df_units$number_of_subsidized_units)
```

### Explore df_buildings

```{r}
df_buildings |>
  select(building_complex_name) |>
  unique() |>
  count()

df_buildings |>
  select(building_complex_name, building_address_list) |>
  group_by(building_address_list) |>
  count() |>
  arrange(desc(n))
```
Building complex name is unique, but some building address lists (full address) have multiple buildings. The following have multiple buildings at the same address:
- 3370 Kingston Road	
- 43 Goldwin Avenue	
- 51 The Chimneystack Road	
- 633 Lake Shore Boulevard West

Building accessibility is measured by many features in this table. 

Wheelchair accessibility:
```{r}
df_buildings |>
  select(wheelchair_accessible_building, wheelchair_accessible_units) |>
  count(wheelchair_accessible_building, wheelchair_accessible_units) |>
  arrange(desc(n))
```
Building and unit accessibility is most common, followed by neither.

How many buildings honour the terminally ill priority?
```{r}
df_buildings |>
  select(terminally_ill) |>
  count(terminally_ill) |>
  arrange(desc(n))
```
473 buildings honour the terminally ill priority. 

How many buildings have elevators or stairs only?
```{r}
df_buildings |>
  select(elevators, stairs_only) |>
  count(elevators, stairs_only) |>
  arrange(desc(n))
```

How many buildings have AC?
```{r}
df_buildings |>
  select(air_conditioning) |>
  count(air_conditioning) |>
  arrange(desc(n))
```
518 buildings do not have AC.

How many buildings have parking?
```{r}
df_buildings |>
  select(parking) |>
  count(parking) |>
  arrange(desc(n))
```
457 buildings offer parking.

Which wards are buildings located in?
```{r}
df_buildings |>
  select(ward) |>
  count(ward) |>
  arrange(desc(n))
```
Buildings are across 25 different wards. Ward 13 has the most buildings at 66.

### Exploring df_units
Are the amount of buildings in this table the same as df_buildings?
```{r}
df_units |> 
  select(building_complex_name) |>
  unique() |>
  count()
```
There are 577 different building complexes in df_units, one less than the df_building table 

Which is missing?
```{r}
df_buildings |> 
  select(building_complex_name) |>
  filter(! building_complex_name %in% df_units$building_complex_name)
```
Agnes Mcphail Townhouses is the one building not in the df_units table. 

What is the distribution of unit types?
```{r}
df_units |>
  select(unit_size, number_of_market_rent_units, number_of_subsidized_units) |>
  group_by(unit_size) |>
  summarize(
    total_market_units=sum(number_of_market_rent_units), 
    total_subsidized_units=sum(number_of_subsidized_units), 
    total_units=sum(sum(number_of_market_rent_units), sum(number_of_subsidized_units))
  ) |>
  arrange(desc(total_units))
```
For both market and subsidized units, the total unit amount of available units follow
the following order: 1B, 2B, B, 3B, 4B, 5B, 6B.

The unit counts do not match the potential housing counts. Assuming the amount of people in a unit matches the amount of bedrooms it has, the housing availability by unit is:
```{r}
# must multiply each unit size by the estimated people living in the unit
# B and 1B = 1, 2B = 2, 3B = 3, etc. 
```

## Response

